<!DOCTYPE html>
<html>
    <head>
        <link type="text/css" rel="stylesheet" href="main.css">
        <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <script>
            if(localStorage["usuario"] == "undefined" || !localStorage["usuario"]) {
              window.location.replace("http://localhost:3000/registrarUsuario.html");
            }
        </script>
    </head>
    <body>

      <div class="header">
        <nav class="navbar navbar-default">
            <div class="container-fluid">
              <div class="navbar-header">
                <a class="navbar-brand" href="horario.html">Agenda de Actividades</a>
              </div>

              <ul class="nav navbar-nav">
                <li><a href="horario.html">Visualizar horario</a></li>
                <li><a href="agregarActividad.html">Agregar actividades</a></li>
              </ul>
            </div>
        </nav>
      </div>

      <div class="tabla">
        <h1 class="jumbotron">Agenda de Actividades</h1>
        <table class="table table-hover" border = 2>
        <tr>
          <td></td>
          <td>Lunes</td>
          <td>Martes</td>
          <td>Miercoles </td>
          <td>Jueves</td>
          <td>Viernes</td>
        </tr>

        <tr id="08">
          <td>8:00 am</td>
          <td class="1">  </td>
          <td class="2">  </td>
          <td class="3">  </td>
          <td class="4">  </td>
          <td class="5">  </td>
        </tr>

        <tr id="09">
          <td>9:00 am</td>
          <td class="1">  </td>
          <td class="2">  </td>
          <td class="3">  </td>
          <td class="4">  </td>
          <td class="5">  </td>
        </tr>

        <tr id="10">
          <td>10:00 am</td>
          <td class="1">  </td>
          <td class="2">  </td>
          <td class="3">  </td>
          <td class="4">  </td>
          <td class="5">  </td>
        </tr>

        <tr id="11">
          <td>11:00 am</td>
          <td class="1">  </td>
          <td class="2">  </td>
          <td class="3">  </td>
          <td class="4">  </td>
          <td class="5">  </td>
        </tr>

        <tr id="12">
          <td>12:00 pm</td>
          <td class="1">  </td>
          <td class="2">  </td>
          <td class="3">  </td>
          <td class="4">  </td>
          <td class="5">  </td>
        </tr>

        <tr id="13">
          <td>1:00 pm</td>
          <td class="1">  </td>
          <td class="2">  </td>
          <td class="3">  </td>
          <td class="4">  </td>
          <td class="5">  </td>
        </tr>

        <tr id="14">
          <td>2:00 pm</td>
          <td class="1">  </td>
          <td class="2">  </td>
          <td class="3">  </td>
          <td class="4">  </td>
          <td class="5">  </td>
        </tr>

        <tr id="15">
          <td>3:00 pm</td>
          <td class="1">  </td>
          <td class="2">  </td>
          <td class="3">  </td>
          <td class="4">  </td>
          <td class="5">  </td>
        </tr>

        <tr id="16">
          <td>4:00 pm</td>
          <td class="1">  </td>
          <td class="2">  </td>
          <td class="3">  </td>
          <td class="4">  </td>
          <td class="5">  </td>
        </tr>

        <tr id="17">
          <td>5:00 pm</td>
          <td class="1">  </td>
          <td class="2">  </td>
          <td class="3">  </td>
          <td class="4">  </td>
          <td class="5">  </td>
        </tr>

        <tr id="18">
          <td>6:00 pm</td>
          <td class="1">  </td>
          <td class="2">  </td>
          <td class="3">  </td>
          <td class="4">  </td>
          <td class="5">  </td>
        </tr>

        <tr id="19">
          <td>7:00 pm</td>
          <td class="1">  </td>
          <td class="2">  </td>
          <td class="3">  </td>
          <td class="4">  </td>
          <td class="5">  </td>
        </tr>

        <tr id="20">
          <td>8:00 pm</td>
          <td class="1">  </td>
          <td class="2">  </td>
          <td class="3">  </td>
          <td class="4">  </td>
          <td class="5">  </td>
        </tr>

        <tr id="21">
          <td>9:00 pm</td>
          <td class="1">  </td>
          <td class="2">  </td>
          <td class="3">  </td>
          <td class="4">  </td>
          <td class="5">  </td>
        </tr>

        <tr id="22">
          <td>10:00 pm</td>
          <td class="1">  </td>
          <td class="2">  </td>
          <td class="3">  </td>
          <td class="4">  </td>
          <td class="5">  </td>
        </tr>
        </table>

      </div>

   <script>
         var data = {
                      "id": JSON.parse(localStorage["usuario"])[0].id,
                      "password": JSON.parse(localStorage["usuario"])[0].password,
         };
             $.ajax(
                {
                   url: "http://localhost:3000/usuario/horario",
                   type: "GET",
                   contentType: "application/json; charset=utf-8",
                   dataType: "json",
                   data: data
                }
             ).done( function(data, status) {
                console.log(data);
                localStorage["horario"] = JSON.stringify(data);
                for( var i in data ) {
                   $("#" + data[i].hora.substring(0, 2) + " ." + data[i].dia).html(data[i].nombre);
                }
             }).fail( function(data, status) {
                console.log("Error ocurred: " + JSON.stringify(data) + "\n" + status);
             });

   </script>

    </body>
</html>
